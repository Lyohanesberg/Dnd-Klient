
# Roadmap: AI Dungeon Master (UA)

Цей документ описує стратегію розвитку додатку від простого текстового чату до повноцінної віртуальної платформи для настільних рольових ігор (VTT) з ШІ-майстром.

## ✅ Етап 0: Базова версія (MVP) — ВИКОНАНО
*Фундамент додатку закладено. Основні механіки вже працюють.*

- [x] **Архітектура:** Налаштування React + TypeScript + Tailwind CSS.
- [x] **ШІ:** Базова інтеграція Gemini API.
- [x] **Модель:** Оновлено до **Gemini 3.0 Pro** для кращої логіки та сторітелінгу.
- [x] **Правила:** Інтеграція механік D&D 5e (SRD) у системний промпт (System Instructions).
- [x] **Інтерфейс:** Лист персонажа (Character Sheet) з редагуванням характеристик.
- [x] **Інструменти:** Базова панель кидка кубиків (Dice Roller).
- [x] **Збереження:** Локальне збереження прогресу (LocalStorage).

---

## ✅ Етап 1: Покращення UX та Візуалізація (Polish & Feel) — ВИКОНАНО
*Мета: Зробити інтерфейс "магічним" та атмосферним.*

1.  **Генерація Портретів Персонажів (ВИКОНАНО):**
    *   [x] Інтеграція Gemini (Imagen) для генерації аватарок на основі раси, класу та опису.
    *   [x] Відображення аватара в `CharacterSheet`.
2.  **3D Кубики (ВИКОНАНО):**
    *   [x] Заміна текстової логіки `[Dice Roll]` на візуальну фізику кубиків (React Dice Complete / Three.js / CSS 3D).
    *   [x] Анімація кидка поверх інтерфейсу.
3.  **Атмосферні теми (ВИКОНАНО):**
    *   [x] Перемикач тем: Автоматична зміна фону локації.
    *   [x] Анімація появи тексту (Typewriter effect) для імітації живого оповідача.

## ✅ Етап 2: Глибока інтеграція механіки (The "Game" Loop) — ВИКОНАНО
*Мета: ШІ має керувати станом гри, а не просто писати текст.*

1.  **Gemini Function Calling (Інструменти) - ВИКОНАНО:**
    *   [x] Навчити модель викликати функції коду замість прохань текстом.
    *   [x] `updateHP(amount, reason)`: Автоматичне зняття здоров'я при ударах.
    *   [x] `updateInventory(item, action)`: Автоматичне додавання луту.
    *   [x] `requestRoll(stat, dc)`: ШІ ініціює модальне вікно для кидка кубика гравцем.
    *   [x] `updateQuest(title, status)`: Журнал завдань.
2.  **Автоматизація Бою (Combat Mode) - ВИКОНАНО:**
    *   [x] Спеціальний режим інтерфейсу під час бою (Червона тема).
    *   [x] `manage_combat` інструмент для ШІ.
    *   [x] Трекер ініціативи (Combat Tracker UI).
    *   [x] Відображення статусів ворогів.

## ✅ Етап 3: Пам'ять та Контекст (Long-term Memory) — ВИКОНАНО
*Мета: Довготривалі кампанії без "амнезії" у ШІ.*

1.  **Стратегія "Ковзаючого вікна" (Sliding Window) - ВИКОНАНО:**
    *   [x] Періодична фонова генерація "Summary" (підсумку) останніх повідомлень (через кожні 10 повідомлень).
    *   [x] Інтеграція `summary` у системний промпт для підтримки контексту.
    *   [x] Вкладка "Історія" в Журналі для перегляду хронік.
2.  **Журнал та База знань (Lorebook) - ВИКОНАНО:**
    *   [x] Окрема вкладка "Нотатки" в Журналі.
    *   [x] Інструмент `add_note` для автоматичного запису імен NPC та локацій.
    *   [x] Структуроване відображення (NPC, Lore, Locations).

## ✅ Етап 4: Мультимедіа та Імерсивність — ВИКОНАНО
*Мета: Задіяти зір та слух.*

1.  **Динамічні фони - ВИКОНАНО:**
    *   [x] Генерація зображень локацій (Ліс, Таверна, Підземелля) "на льоту" через `update_location`.
    *   [x] Зміна фону чату відповідно до контексту.
2.  **Аудіо супровід - ВИКОНАНО:**
    *   [x] **Web Audio SFX:** Синтезовані звуки для кидків кубиків, UI та сповіщень (без зовнішніх файлів).
    *   [x] **Adaptive Music:** Перемикання фонової музики залежно від стану (Бій, Дослідження, Таверна).
    *   [x] **Audio Controls:** Панель гучності в меню.

## ✅ Етап 5: Інфраструктура (Backend) — ВИКОНАНО
*Мета: Грати будь-де.*

1.  **Хмарне збереження (Google Drive) - ВИКОНАНО:**
    *   [x] Авторизація через Google (Google Identity Services).
    *   [x] Збереження та завантаження файлів кампанії (.json) безпосередньо на Google Диск авторизованого акаунта.
    *   [x] Інтерфейс керування файлами.

## ✅ Етап 6: Тактична Мапа (Battle Grid) — ВИКОНАНО
*Мета: Візуалізація тактики та стратегії бою.*

1.  **Інтерактивна сітка (Canvas/SVG) - ВИКОНАНО:**
    *   [x] Відображення сітки 5х5 футів поверх фону локації.
    *   [x] Токени персонажів та монстрів (перетягування).
    *   [x] Автоматична синхронізація з бойовим трекером.
    *   [x] Відображення дистанції при переміщенні.
2.  **Логіка простору:**
    *   [x] Розрахунок дистанції (Euclidean/Chebyshev).
    *   [ ] **AI Placement:** Інструмент `place_enemies`, щоб ШІ автоматично пропонував координати ворогів на мапі.
    *   [ ] Туман війни (Fog of War) для підземель.

## Етап 7: Спільні пригоди
*Мета: Мультиплеєр.*

1.  **Спільні сесії:**
    *   [ ] Можливість мультиплеєру (кілька гравців в одному чаті через WebSockets/Firebase).
